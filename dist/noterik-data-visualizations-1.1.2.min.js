/*! noterik-data-visualizations 2016-08-09 */
!function(a){a.fn.extend({ntkBarChart:function(b,c){return this.each(function(){a.ntkBarChart(this,b,c)}),this}});var b=function(a,b){b=jQuery.extend({},this.defaults,b),b.width||(b.width=a.width()-b.margin.left-b.margin.right),b.height||(b.height=a.height()-b.margin.top-b.margin.bottom);var c=d3.select(a[0]).append("svg").attr("width",b.width+b.margin.left+b.margin.right).attr("height",b.height+b.margin.top+b.margin.bottom).append("g").attr("transform","translate("+b.margin.left+","+b.margin.top+")"),d=d3.scale.ordinal().rangeRoundBands([0,b.width],.1),e=d3.scale.category20(),f=d3.scale.linear().range([b.height,0]),g=d3.svg.axis().scale(d).orient("bottom"),h=d3.svg.axis().scale(f).orient("left").ticks(10,"%");d.domain(b.data.map(function(a){return a.label})),f.domain([0,d3.max(b.data,function(a){return a.value})]),c.append("g").attr("class","xAxis").attr("transform","translate(0,"+b.height+")").call(g),c.append("g").attr("class","y axis").call(h).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Occurences"),c.selectAll(".bar").data(b.data).enter().append("rect").attr("class","bar").attr("x",function(a){return d(a.label)}).attr("width",d.rangeBand()).attr("y",function(a){return f(a.value)}).attr("height",function(a){return b.height-f(a.value)}).attr("fill",function(a,b){return e(b)})};b.prototype=Object.create({}),b.prototype.defaults={data:[],fontFamily:"Verdana,sans-serif",fontColor:"#FFFFFF",margin:{top:20,right:20,bottom:30,left:60}},a.ntkBarChart=function(c,d,e){var f=a(c),g=function(a,c){f.data("ntk_barchart",new b(f,c))};if(d&&"string"==typeof d){var h=f.data("ntk_barchart");return void("function"==typeof h[d]&&h[d].apply(h,[e]))}d&&"object"==typeof d&&g(c,d)}}(jQuery),function(a){a.fn.extend({ntkPieChart:function(b,c){return this.each(function(){a.ntkPieChart(this,b,c)}),this}});var b=function(a,b){function c(){j.transition().duration(500).attrTween("d",e).style("fill",function(a,b){return a.data.color?a.data.color:g(b)}),k.transition().text(function(a){return a.data.label}),k.transition().duration(750).attrTween("transform",d)}function d(a){var b=d3.interpolate(this._current,a);return this._current=b(0),function(a){return"translate("+i.centroid(b(a))+")"}}function e(a){var b;if(this._startAnimationDone)return b=d3.interpolate(this._current,a),this._current=b(0),function(a){return i(b(a))};this._startAnimationDone=!0;var c={startAngle:a.endAngle,endAngle:a.endAngle};return b=d3.interpolate(c,a),function(a){return i(b(a))}}b=jQuery.extend({},this.defaults,b),b.width||(b.width=a.width()),b.height||(b.height=a.height()),b.radius||(b.radius=Math.min(b.width,b.height)/2);var f=d3.layout.pie().sort(null).value(function(a){return a.value}),g=d3.scale.category20(),h=d3.select(a[0]).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+b.width+" "+b.height).append("g").attr("transform","translate("+b.width/2+","+b.height/2+")"),i=d3.svg.arc().outerRadius(b.radius).innerRadius(0),j=h.selectAll("path").data(f(b.data)),k=h.selectAll("text").data(f(b.data)),l=function(){j.exit().remove(),k.exit().remove(),j.enter().append("path").style("fill",function(a,b){return a.data.color?a.data.color:g(b)}).each(function(a){this._current=a}),k.enter().append("text").text(function(a){return a.data.label}).attr("transform",function(a){return"translate("+i.centroid(a)+")"}).style("font-family",function(a){return a.fontFamily?a.fontFamily:b.fontFamily}).style("fill",function(a){return a.fontColor?a.fontColor:b.fontColor}).each(function(a){this._current=a})};l(),c(),this.redraw=function(){var a=f(b.data);j=j.data(a),k=k.data(a),l(),c()},this.setData=function(a){b.data=a}};b.prototype=Object.create({}),b.prototype.defaults={data:[],fontFamily:"Verdana,sans-serif",fontColor:"#FFFFFF"},a.ntkPieChart=function(c,d,e){var f=a(c),g=function(a,c){f.data("ntk_piechart",new b(f,c))};if(d&&"string"==typeof d){var h=f.data("ntk_piechart");return void("function"==typeof h[d]&&h[d].apply(h,[e]))}d&&"object"==typeof d&&g(c,d)}}(jQuery),function(a,b,c){function d(d,e,f){function g(){U.attr("transform","translate("+N(U.attr("T"))+",0)"),U.transition().duration(e.waveAnimateTime*(1-U.attr("T"))).ease("linear").attr("transform","translate("+N(1)+",0)").attr("T",1).each("end",function(){U.attr("T",0),g(e.waveAnimateTime)})}function h(){this.update=function(a){var c=parseFloat(a).toFixed(2),d=function(a){return Math.round(a)};parseFloat(c)!==parseFloat(d(c))&&(d=function(a){return parseFloat(a).toFixed(1)}),parseFloat(c)!==parseFloat(d(c))&&(d=function(a){return parseFloat(a).toFixed(2)});var f=function(){var c=b.interpolate(this.textContent,parseFloat(a).toFixed(2));return function(a){this.textContent=d(c(a))+w}};R.transition().duration(e.waveRiseTime).tween("text",f),W.transition().duration(e.waveRiseTime).tween("text",f);var h,i=Math.max(e.minValue,Math.min(e.maxValue,a))/e.maxValue,j=A*l(100*i),k=b.scale.linear().range([z+2*A+j,z-j]).domain([0,1]),m=k(i),n=b.scale.linear().range([0,E]).domain([0,1]),o=b.scale.linear().range([0,j]).domain([0,1]);h=e.waveHeightScaling?b.svg.area().x(function(a){return n(a.x)}).y0(function(a){return o(Math.sin(2*Math.PI*e.waveOffset*-1+2*Math.PI*(1-e.waveCount)+2*a.y*Math.PI))}).y1(function(a){return 2*A+j}):S;var p=e.waveAnimate?N(1):0;U.transition().duration(0).transition().duration(e.waveAnimate?e.waveAnimateTime*(1-U.attr("T")):e.waveRiseTime).ease("linear").attr("d",h).attr("transform","translate("+p+",0)").attr("T","1").each("end",function(){e.waveAnimate&&(U.attr("transform","translate("+N(0)+",0)"),g(e.waveAnimateTime))}),T.transition().duration(e.waveRiseTime).attr("transform","translate("+Y+","+m+")")}}var i=null,j=c.performance.now(),k=a(d);e=e?e:k.data("ntk_waterball_settings"),e.width=e.width?e.width:k.width(),e.height=e.height?e.height:k.height();var l,m=b.select(d).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+e.width+" "+e.height),n=f?f:e.minValue,o=m,p=Math.min(e.width,e.height)/2,q=e.width/2-p,r=e.height/2-p,s=Math.max(e.minValue,Math.min(e.maxValue,n))/e.maxValue;l=e.waveHeightScaling?b.scale.linear().range([0,e.waveHeight,0]).domain([0,50,100]):b.scale.linear().range([e.waveHeight,e.waveHeight]).domain([0,100]);var t=e.textSize*p/2,u=parseFloat(n).toFixed(2),v=e.valueCountUp?e.minValue:u,w=e.displayPercent?"%":"",x=e.circleThickness*p,y=e.circleFillGap*p,z=x+y,A=p-z,B=A*l(100*s),C=2*A/e.waveCount,D=1+e.waveCount,E=C*D,F=function(a){return Math.round(a)};parseFloat(u)!==parseFloat(F(u))&&(F=function(a){return parseFloat(a).toFixed(1)}),parseFloat(u)!==parseFloat(F(u))&&(F=function(a){return parseFloat(a).toFixed(2)});for(var G=[],H=0;40*D>=H;H++)G.push({x:H/(40*D),y:H/40});var I=b.scale.linear().range([0,2*Math.PI]).domain([0,1]),J=b.scale.linear().range([0,p]).domain([0,p]),K=b.scale.linear().range([0,E]).domain([0,1]),L=b.scale.linear().range([0,B]).domain([0,1]),M=b.scale.linear().range([z+2*A+B,z-B]).domain([0,1]),N=b.scale.linear().range([0,E-2*A]).domain([0,1]),O=b.scale.linear().range([z+2*A,z+.7*t]).domain([0,1]),P=o.append("g").attr("transform","translate("+q+","+r+")"),Q=b.svg.arc().startAngle(I(0)).endAngle(I(1)).outerRadius(J(p)).innerRadius(J(p-x));P.append("path").attr("d",Q).style("fill",e.circleColor).attr("transform","translate("+p+","+p+")");var R=P.append("text").text(F(v)+w).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",t+"px").style("fill",e.textColor).attr("transform","translate("+p+","+O(e.textVertPosition)+")"),S=b.svg.area().x(function(a){return K(a.x)}).y0(function(a){return L(Math.sin(2*Math.PI*e.waveOffset*-1+2*Math.PI*(1-e.waveCount)+2*a.y*Math.PI))}).y1(function(a){return 2*A+B}),T=P.append("defs").append("clipPath").attr("id","clipWave"+j),U=T.append("path").datum(G).attr("d",S).attr("T",0),V=P.append("g").attr("clip-path","url(#clipWave"+j+")");V.append("circle").attr("cx",p).attr("cy",p).attr("r",A).style("fill",e.waveColor);var W=V.append("text").text(F(v)+w).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",t+"px").style("fill",e.waveTextColor).attr("transform","translate("+p+","+O(e.textVertPosition)+")");if(e.valueCountUp){var X=function(){var a=b.interpolate(this.textContent,u);return function(b){this.textContent=F(a(b))+w}};R.transition().duration(e.waveRiseTime).tween("text",X),W.transition().duration(e.waveRiseTime).tween("text",X)}var Y=z+2*A-E;return e.waveRise?T.attr("transform","translate("+Y+","+M(0)+")").transition().duration(e.waveRiseTime).attr("transform","translate("+Y+","+M(s)+")").each("start",function(){U.attr("transform","translate(1,0)")}):T.attr("transform","translate("+Y+","+M(s)+")"),e.waveAnimate&&g(),i=new h,{update:function(a){i.update(a)}}}a.fn.extend({ntkWaterball:function(b,c){return b&&"object"==typeof b?b=a.extend({},a.ntkWaterball.defaults,b):b||(b=a.extend({},a.ntkWaterball.defaults)),this.each(function(){a.ntkWaterball(this,b,c)}),this}}),a.ntkWaterball=function(b,c,e){function f(a,c){g.data("ntk_waterball",new d(b,a,c)),g.data("ntk_waterball_settings",a)}var g=a(b),h={update:function(a){g.data("ntk_waterball")&&g.data("ntk_waterball").update(a)}};if(c&&"string"==typeof c)return void h[c].apply(b,[e]);if(c&&"object"==typeof c){if("undefined"!=typeof e&&"number"!=typeof e)throw"Please pass a number as argument";f(c,e)}},a.ntkWaterball.defaults={minValue:0,maxValue:100,circleThickness:.05,circleFillGap:.05,circleColor:"#178BCA",waveHeight:.05,waveCount:1,waveRiseTime:1e3,waveAnimateTime:18e3,waveRise:!0,waveHeightScaling:!0,waveAnimate:!0,waveColor:"#178BCA",waveOffset:0,textVertPosition:.5,textSize:1,valueCountUp:!0,displayPercent:!0,textColor:"#045681",waveTextColor:"#A4DBf8"}}(jQuery,d3,window),function(a){a.fn.extend({ntkWordcloud:function(b,c){return b&&"object"==typeof b?b=a.extend({},a.ntkWordcloud.defaults,b):b||(b=a.extend({},a.ntkWordcloud.defaults)),this.each(function(){a.ntkWordcloud(this,b,c)}),this}}),a.ntkWordcloud=function(b,c,d){var e={addWord:function(c){var d=a(this),e=d.data("ntk_wordcloud_settings"),g=e.words,h=!1;g.forEach(function(a){a.text===c.text&&(h=!0,a.wantedFontSize?a.wantedFontSize+=a.fontSizeIncrease:a.wantedFontSize=a.fontSize+a.fontSizeIncrease)});h||g.push(a.extend({},e.wordDefaults,c)),f(b)},reset:function(){a(this).html("");var b=a(this).data("ntk_wordcloud_settings");b.words=[],g(this)}},f=function(b){var c=a(b),d=c.data("ntk_wordcloud_settings"),e=d._force,f=d._svg,g=d.words;e.start(),f.selectAll("text").remove(),b=f.selectAll("g myCircleText").data(g.slice(1));var h=d3.scale.category20();b.enter().append("text").text(function(a){return a.text}).style("font-family",function(a){return a.fontFamily}).attr("dx",function(a){return this.getComputedTextLength()/2}).attr("fill",function(a,b){return"random"===a.color?h(b):a.color});f.selectAll("text").each(function(a){var b=this.getBoundingClientRect();a.textHeight=b.height,a.textWidth=b.width,a.x2=function(){return a.x+a.textWidth},a.y2=function(){return a.y+a.textHeight}})},g=function(b,c){var d=a(b),e=d.data("ntk_wordcloud_settings"),g=c?c:e;g.width||(g.width=d.width()),g.height||(g.height=d.height());var h={radius:0,fixed:!0};g.words=g.words.map(function(b){return a.extend({},g.wordDefaults,b)}),g.words.unshift(h),g._force=d3.layout.force().gravity(g.gravity).charge(function(a,b){return a.fontSize?a.fontSize*g.chargeMultiplier:g.defaultCharge}).nodes(g.words).size([g.width,g.height]),g._svg=d3.select(b).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+g.width+" "+g.height),d.data("ntk_wordcloud_settings",g),g._force.on("tick",function(a){g._svg.selectAll("text").attr("transform",function(a){return a.x&&a.y||(a.x=0,a.y=0),"translate("+a.x+","+a.y+")"}).style("font-size",function(a){return a.wantedFontSize&&a.wantedFontSize>a.fontSize&&a.fontSize++,a.fontSize+"px"})}),f(b)};return c&&"string"==typeof c?void e[c].apply(b,[d]):void(c&&"object"==typeof c&&g(b,c))},a.ntkWordcloud.defaults={words:[],gravity:.4,wordDefaults:{text:"Lorum",color:"random",fontSize:30,fontSizeIncrease:10,fontFamily:"Helvetica"},defaultCharge:-1500,chargeMultiplier:-50}}(jQuery);